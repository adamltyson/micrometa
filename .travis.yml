language: python
matrix:
  include:
  - os: linux
    python: 3.6
    dist: bionic
    env: PIP_CMD='pip install -e .[dev]' TEST_CMD='tests/travis/testing.sh'
  - os: linux
    python: 3.7
    dist: bionic
    env: PIP_CMD='pip install -e .[dev]' TEST_CMD='tests/travis/testing.sh'
  - os: linux
    python: 3.8
    dist: bionic
    env: PIP_CMD='pip install -e .[dev]' TEST_CMD='tests/travis/testing.sh'
before_install:
- wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda info -a
install:
- conda create -n test-environment python=$TRAVIS_PYTHON_VERSION
- source activate test-environment
- "$PIP_CMD"
- conda info -a
after_success:
- coveralls
script:
- travis_wait 40 bash $TEST_CMD
notifications:
  email:
    recipients:
    - adam.tyson@ucl.ac.uk
    on_success: change
    on_failure: always
deploy:
  - provider: pypi
    user: adamltyson
    distributions: sdist bdist_wheel
    skip_cleanup: true
    on:
      tags: true
    password:
      secure: TTlYpso+ALh8nD0gPIh7oZdgQiPdpyO3C7OVZwMXgewDYC5dT4cNES2LZi8i2eDh/AO9KU0M6TNQuf+8TH2rQvLnhaM28IAa9G8MwrF4xSdaFc0sQQHp3SJVQ3htIZxcLUEnU5Px8xQnZwopefrk1lbofmJNJRlXSpKoQC3GF642OvfDWafzXNqYvuX/mPI9H63M/gzshnQnqZ/DcT4YMQK3xtpbuMomINQBuDH/mVUH9k7Jvy49gdFn85zAdUuvVuee52CZJ/ipkuznX+OyUIwyQjuNGh53k9EetirLbztnx3pjeygJ8euhA6UYk5GSF6sdbia9w/Jt8V0Moz+A2qbzWny+BJLrXBEiiEnVg3XPBIvhaAWGRMQ/s8bWjomEwjMCDljMeDuvP310H5H1A0/DbXoFGi8uvbFbkoaMh85zQotqSv+oIakZLaJzmgIzvhaD8JwmOwS1E7+99kZrdRfJsuAgNm4bDKAWJFaGZkNxrjYYKCkgkd08Tf7Kr2YxjECAj92Y1lFMD7F10VuBkviT6uPkPRF6JyEuXDWcDgSVn1mmOgavdYqNr1rAdoabPMtFhiNGVcjNPUhDW5/CIEEv+g049ctfu8iFg3SFnK8sEiBzwE759KWs8ugckv5V11vwSSOuFHwZTwvZMZ0g6oeORMLz6wU782hm/9kIbM8=
